{% extends "base.html" %}
{% from "macros/icons.html" import icon %}
{% block content %}

<div class="flex justify-between items-center mb-6">
  <h1 class="m-0">Drafts</h1>
  <a href="/drafts/new" class="btn btn-primary">
    {{ icon("plus") }} Neuer Draft
  </a>
</div>

<!-- Filter Pills -->
<div class="flex flex-col gap-3 py-4 border-b border-base-300 mb-4">
  <div class="flex flex-wrap items-center gap-2">
    <span class="text-sm text-base-content/70 font-medium min-w-16">Status:</span>
    <a href="/drafts" class="btn btn-sm {% if not current_status %}btn-primary{% else %}btn-ghost{% endif %}">Alle</a>
    {% for s in statuses %}
      <a href="/drafts?status={{ s }}{% if current_kind %}&kind={{ current_kind }}{% endif %}"
         class="btn btn-sm {% if current_status == s %}btn-primary{% else %}btn-ghost{% endif %}">
        {{ s|capitalize }}
      </a>
    {% endfor %}
  </div>
  <div class="flex flex-wrap items-center gap-2">
    <span class="text-sm text-base-content/70 font-medium min-w-16">Typ:</span>
    <a href="/drafts{% if current_status %}?status={{ current_status }}{% endif %}"
       class="btn btn-sm {% if not current_kind %}btn-primary{% else %}btn-ghost{% endif %}">Alle</a>
    {% for k in kinds %}
      <a href="/drafts?kind={{ k }}{% if current_status %}&status={{ current_status }}{% endif %}"
         class="btn btn-sm {% if current_kind == k %}btn-primary{% else %}btn-ghost{% endif %}">
        {% if k == 'linkedin' %}{{ icon("linkedin") }}{% endif %}
        {% if k == 'article' %}{{ icon("file-text") }}{% endif %}
        {% if k == 'note' %}{{ icon("edit-3") }}{% endif %}
        {{ k|capitalize }}
      </a>
    {% endfor %}
  </div>
</div>

<!-- Results Count -->
<p class="text-sm text-base-content/70 mb-4">{{ drafts|length }} Draft{% if drafts|length != 1 %}s{% endif %}</p>

<!-- Drafts List -->
{% if drafts %}
<div class="flex flex-col gap-2">
  {% for d in drafts %}
    <a href="/drafts/{{ d.id }}" class="card bg-base-100 shadow-sm hover:shadow-md hover:border-primary transition-all">
      <div class="card-body flex-row items-center gap-4 p-4">
        <div class="w-10 h-10 flex items-center justify-center bg-base-200 rounded-lg text-base-content/60">
          {% if d.kind == 'linkedin' %}{{ icon("linkedin") }}
          {% elif d.kind == 'article' %}{{ icon("file-text") }}
          {% else %}{{ icon("edit-3") }}{% endif %}
        </div>
        <div class="flex-1 min-w-0">
          <div class="font-medium truncate">{{ d.title or ("Draft #" ~ d.id) }}</div>
          <div class="flex items-center gap-2 text-sm text-base-content/60">
            <span class="badge badge-sm {% if d.status == 'working' %}badge-warning{% elif d.status == 'published' %}badge-success{% else %}badge-ghost{% endif %}">{{ d.status }}</span>
            <span>{{ d.updated_at[:10] if d.updated_at else '' }}</span>
          </div>
        </div>
        <div class="text-base-content/40">{{ icon("chevron-right") }}</div>
      </div>
    </a>
  {% endfor %}
</div>
{% else %}
<div class="text-center py-12 text-base-content/60">
  <div class="text-5xl opacity-30 mb-4">{{ icon("file-plus") }}</div>
  <p class="mb-4">Noch keine Drafts vorhanden.</p>
  <a href="/drafts/new" class="btn btn-primary">Ersten Draft erstellen</a>
</div>
{% endif %}

<!-- Styles migrated to DaisyUI classes -->

{% endblock %}
